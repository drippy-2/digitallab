<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ cv.full_name }} - {{ cv.title }}</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="{{ cv.summary[:150] if cv.summary else cv.full_name + ' - Professional CV' }}">
    <meta name="keywords" content="CV, Resume, {{ cv.full_name }}, Professional">
    <meta name="author" content="{{ cv.full_name }}">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="{{ cv.full_name }} - {{ cv.title }}">
    <meta property="og:description" content="{{ cv.summary[:200] if cv.summary else 'Professional CV created with Digitallab CV Creator' }}">
    <meta property="og:type" content="profile">
    <meta property="og:url" content="{{ request.url }}">
    
    <!-- Print Styles -->
    <style>
        @media print {
            .no-print { display: none !important; }
            .container { max-width: none !important; margin: 0 !important; padding: 0 !important; }
            .card { border: none !important; box-shadow: none !important; }
            .badge { border: 1px solid #000 !important; }
        }
    </style>
</head>
<body class="bg-light">
    <!-- Header with Digitallab Branding -->
    <header class="bg-white shadow-sm no-print">
        <div class="container py-3">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <div class="d-flex align-items-center">
                        <img src="{{ url_for('static', filename='images/digitallab-logo.svg') }}" alt="Digitallab" height="30" class="me-2">
                        <span class="h6 mb-0 text-muted">CV Creator</span>
                    </div>
                </div>
                <div class="col-md-6 text-md-end">
                    <button onclick="window.print()" class="btn btn-outline-primary btn-sm me-2">
                        <i class="fas fa-print me-1"></i>Print CV
                    </button>
                    <a href="{{ url_for('index') }}" class="btn btn-primary btn-sm">
                        <i class="fas fa-plus me-1"></i>Create Your CV
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- CV Content -->
    <main class="container py-4">
        <div class="row justify-content-center">
            <div class="col-lg-10 col-xl-8">
                <div class="card border-0 shadow-sm">
                    <div class="card-body p-4 p-md-5">
                        <!-- CV Header -->
                        <header class="cv-header text-center mb-5 pb-4 border-bottom">
                            <h1 class="display-5 fw-bold text-primary mb-3">{{ cv.full_name }}</h1>
                            <h2 class="h4 text-muted mb-4">{{ cv.title }}</h2>
                            
                            <!-- Contact Information -->
                            <div class="contact-info row justify-content-center text-muted">
                                <div class="col-auto mb-2">
                                    <i class="fas fa-envelope me-2"></i>
                                    <a href="mailto:{{ cv.email }}" class="text-decoration-none">{{ cv.email }}</a>
                                </div>
                                {% if cv.phone %}
                                    <div class="col-auto mb-2">
                                        <i class="fas fa-phone me-2"></i>
                                        <a href="tel:{{ cv.phone }}" class="text-decoration-none">{{ cv.phone }}</a>
                                    </div>
                                {% endif %}
                                {% if cv.address %}
                                    <div class="col-auto mb-2">
                                        <i class="fas fa-map-marker-alt me-2"></i>
                                        <span>{{ cv.address }}</span>
                                    </div>
                                {% endif %}
                            </div>
                            
                            <!-- Professional Links -->
                            {% if cv.website_url or cv.linkedin_url or cv.github_url %}
                                <div class="professional-links mt-4">
                                    {% if cv.website_url %}
                                        <a href="{{ cv.website_url }}" target="_blank" class="btn btn-outline-primary btn-sm me-2 mb-2">
                                            <i class="fas fa-globe me-1"></i>Website
                                        </a>
                                    {% endif %}
                                    {% if cv.linkedin_url %}
                                        <a href="{{ cv.linkedin_url }}" target="_blank" class="btn btn-outline-info btn-sm me-2 mb-2">
                                            <i class="fab fa-linkedin me-1"></i>LinkedIn
                                        </a>
                                    {% endif %}
                                    {% if cv.github_url %}
                                        <a href="{{ cv.github_url }}" target="_blank" class="btn btn-outline-dark btn-sm mb-2">
                                            <i class="fab fa-github me-1"></i>GitHub
                                        </a>
                                    {% endif %}
                                </div>
                            {% endif %}
                        </header>

                        <!-- Professional Summary -->
                        {% if cv.summary %}
                            <section class="cv-section mb-5">
                                <h3 class="section-title text-primary fw-bold mb-3 d-flex align-items-center">
                                    <i class="fas fa-user me-3"></i>Professional Summary
                                </h3>
                                <p class="lead text-justify">{{ cv.summary }}</p>
                            </section>
                        {% endif %}

                        <!-- Work Experience -->
                        {% if cv.experience %}
                            <section class="cv-section mb-5">
                                <h3 class="section-title text-primary fw-bold mb-4 d-flex align-items-center">
                                    <i class="fas fa-briefcase me-3"></i>Work Experience
                                </h3>
                                <div class="experience-content">
                                    {% for line in cv.experience.split('\n') %}
                                        {% if line.strip() %}
                                            {% if '|' in line %}
                                                <div class="experience-item mb-4">
                                                    {% set parts = line.split('|') %}
                                                    <h5 class="fw-bold mb-2">{{ parts[0].strip() }}</h5>
                                                    {% if parts|length > 1 %}
                                                        <p class="text-muted mb-3">
                                                            <i class="fas fa-building me-2"></i>{{ parts[1].strip() }}
                                                            {% if parts|length > 2 %}
                                                                <span class="ms-3"><i class="fas fa-calendar me-2"></i>{{ parts[2].strip() }}</span>
                                                            {% endif %}
                                                        </p>
                                                    {% endif %}
                                                </div>
                                            {% elif line.strip().startswith('•') %}
                                                <ul class="ms-4 mb-3">
                                                    <li class="mb-2">{{ line.strip()[1:].strip() }}</li>
                                                </ul>
                                            {% endif %}
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </section>
                        {% endif %}

                        <!-- Education -->
                        {% if cv.education %}
                            <section class="cv-section mb-5">
                                <h3 class="section-title text-primary fw-bold mb-4 d-flex align-items-center">
                                    <i class="fas fa-graduation-cap me-3"></i>Education
                                </h3>
                                <div class="education-content">
                                    {% for line in cv.education.split('\n') %}
                                        {% if line.strip() %}
                                            {% if '|' in line %}
                                                <div class="education-item mb-4">
                                                    {% set parts = line.split('|') %}
                                                    <h5 class="fw-bold mb-2">{{ parts[0].strip() }}</h5>
                                                    {% if parts|length > 1 %}
                                                        <p class="text-muted mb-3">
                                                            <i class="fas fa-university me-2"></i>{{ parts[1].strip() }}
                                                            {% if parts|length > 2 %}
                                                                <span class="ms-3"><i class="fas fa-calendar me-2"></i>{{ parts[2].strip() }}</span>
                                                            {% endif %}
                                                        </p>
                                                    {% endif %}
                                                </div>
                                            {% elif line.strip().startswith('•') %}
                                                <ul class="ms-4 mb-3">
                                                    <li class="mb-2">{{ line.strip()[1:].strip() }}</li>
                                                </ul>
                                            {% endif %}
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </section>
                        {% endif %}

                        <!-- Skills -->
                        {% if skills %}
                            <section class="cv-section mb-5">
                                <h3 class="section-title text-primary fw-bold mb-4 d-flex align-items-center">
                                    <i class="fas fa-cogs me-3"></i>Skills
                                </h3>
                                <div class="skills-content">
                                    {% for skill in skills %}
                                        <span class="badge bg-light text-dark border me-2 mb-2 px-3 py-2">{{ skill.strip() }}</span>
                                    {% endfor %}
                                </div>
                            </section>
                        {% endif %}

                        <!-- Projects -->
                        {% if cv.projects %}
                            <section class="cv-section mb-5">
                                <h3 class="section-title text-primary fw-bold mb-4 d-flex align-items-center">
                                    <i class="fas fa-project-diagram me-3"></i>Projects
                                </h3>
                                <div class="projects-content">
                                    {% for line in cv.projects.split('\n') %}
                                        {% if line.strip() %}
                                            {% if '|' in line %}
                                                <div class="project-item mb-4">
                                                    {% set parts = line.split('|') %}
                                                    <h5 class="fw-bold mb-2">{{ parts[0].strip() }}</h5>
                                                    {% if parts|length > 1 %}
                                                        <p class="text-muted mb-3">
                                                            <i class="fas fa-code me-2"></i>{{ parts[1].strip() }}
                                                            {% if parts|length > 2 and parts[2].strip() %}
                                                                <a href="{{ parts[2].strip() }}" target="_blank" class="ms-3 text-primary">
                                                                    <i class="fas fa-external-link-alt me-1"></i>View Project
                                                                </a>
                                                            {% endif %}
                                                        </p>
                                                    {% endif %}
                                                </div>
                                            {% elif line.strip().startswith('•') %}
                                                <ul class="ms-4 mb-3">
                                                    <li class="mb-2">{{ line.strip()[1:].strip() }}</li>
                                                </ul>
                                            {% else %}
                                                <p class="ms-4 text-muted">{{ line.strip() }}</p>
                                            {% endif %}
                                        {% endif %}
                                    {% endfor %}
                                </div>
                            </section>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-white border-top py-4 no-print">
        <div class="container text-center">
            <div class="row align-items-center">
                <div class="col-md-6 text-md-start">
                    <div class="d-flex align-items-center justify-content-center justify-content-md-start">
                        <img src="{{ url_for('static', filename='images/digitallab-logo.svg') }}" alt="Digitallab" height="24" class="me-2">
                        <span class="text-muted">CV Creator</span>
                    </div>
                </div>
                <div class="col-md-6 text-md-end mt-2 mt-md-0">
                    <p class="text-muted small mb-0">
                        Created with <i class="fas fa-heart text-danger"></i> using Digitallab CV Creator
                    </p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script>
    // Smooth scrolling for better UX
    document.addEventListener('DOMContentLoaded', function() {
        // Add smooth animation to sections
        const sections = document.querySelectorAll('.cv-section');
        sections.forEach((section, index) => {
            section.style.opacity = '0';
            section.style.transform = 'translateY(20px)';
            section.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            
            setTimeout(() => {
                section.style.opacity = '1';
                section.style.transform = 'translateY(0)';
            }, 200 + (index * 100));
        });
    });
    </script>
</body>
</html>